<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <meta name="description" content="" />
      <meta name="author" content="" />
      <title>Add Product</title>
      <!-- Favicon-->
      <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
      <!-- Bootstrap icons-->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
      <!-- Core theme CSS (includes Bootstrap)-->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" crossorigin="anonymous">
      <style>
         .drag-drop-area {
         border: 2px dashed #ccc;
         padding: 20px;
         text-align: center;
         font-size: 18px;
         cursor: pointer;
         width: 100%;
         height: 500px;
         display: flex;
         flex-direction: column;
         justify-content: center;
         align-items: center;
         }
         .drag-drop-area.highlight {
         background-color: #f7f7f7;
         }
         .file-preview {
         margin-top: 20px;
         text-align: center;
         position: relative;
         }
         .file-preview img {
         max-width: 500px;
         max-height: 500px;
         }
         .close-button {
         position: absolute;
         top: 5px;
         right: 5px;
         font-size: 20px;
         color: red;
         cursor: pointer;
         }
      </style>
   </head>
   {{- template "header.html" .}}
   <body>
      <section class="py-5">
         <div class="container px-4 px-lg-5 my-5">
         <h1>Add Product</h1>
         <form method="post" action="/products/new" enctype="multipart/form-data">
            <div class="row gx-4 gx-lg-5">
               <div class="col-md-6">
                  <div class="form-group">
                     <div id="drag-drop-area" class="drag-drop-area">
                        <span id="drag-drop-text">Drag and drop files here or click to upload</span>
                     </div>
                     <input type="file" hidden id="file" name="file">
                  </div>
                  <div id="image-container" class="file-preview"></div>
               </div>
               <div class="col-md-6">
                  <div class="form-group row">
                     <label for="title" class="col-sm-2 col-form-label">Title</label>
                     <div class="col-sm-10">
                        <input class="form-control border-0 shadow-none" type="text" name="title" id="title" placeholder="Enter Title" required>
                     </div>
                  </div>
                  <div class="form-group row">
                     <label for="type" class="col-sm-2 col-form-label">Type</label>
                     <div class="col-sm-10">
                        <input name="type" type="text" id="type" step="any" class="form-control border-0 shadow-none" placeholder="Enter" required>
                     </div>
                  </div>
                  <div class="form-group row">
                     <label for="description" class="col-sm-2 col-form-label">Description</label>
                     <div class="col-sm-10">
                        <textarea class="form-control border-0 shadow-none" name="description" id="description" rows="12" placeholder="Enter Description" required></textarea>
                     </div>
                  </div>
                  <div class="form-group row">
                     <label for="price" class="col-sm-2 col-form-label">Price</label>
                     <div class="col-sm-10">
                        <input name="price" type="number" step="any" class="form-control border-0 shadow-none" placeholder="Enter Price" required>
                     </div>
                  </div>
                  <div class="form-group row">
                     <label for="tag" class="col-sm-2 col-form-label">Tag</label>
                     <div class="col-sm-10">
                        <input name="tag" step="any" placeholder="Enter Tag (optional)" class="form-control border-0 shadow-none">
                     </div>
                  </div>
                  <button type="submit" class="add-to-basket btn btn-outline-dark w-100 mt-3">Create Product</button>
                </div>
            </div>
         </form>
         </div>
      </section>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
      <script>
         document.addEventListener('DOMContentLoaded', function () {
           var dragDropArea = document.getElementById('drag-drop-area');
           var fileInput = document.getElementById('file');
           var filePreview = document.getElementById('image-container');
           var dragDropText = document.getElementById('drag-drop-text');
         
           function previewFile(file) {
             var reader = new FileReader();
             reader.onload = function (e) {
               var img = document.createElement('img');
               img.src = e.target.result;
               img.classList.add('img-fluid');
               filePreview.innerHTML = '';
               filePreview.appendChild(img);
               var closeButton = document.createElement('span');
               closeButton.classList.add('close-button');
               closeButton.innerHTML = '&times;';
               closeButton.addEventListener('click', function () {
                 filePreview.innerHTML = '';
                 filePreview.appendChild(dragDropArea);
                 fileInput.value = '';
                 dragDropArea.style.display = 'flex';
               });
               filePreview.appendChild(closeButton);
             };
             reader.readAsDataURL(file);
             dragDropArea.style.display = 'none';
           }
         
           function handleDrop(e) {
             e.preventDefault();
             dragDropArea.classList.remove('highlight');
             var files = e.dataTransfer.files;
             fileInput.files = files;
             if (files.length > 0) {
               previewFile(files[0]);
             }
           }
         
           function handleFileChange() {
             var files = fileInput.files;
             if (files.length > 0) {
               previewFile(files[0]);
             }
           }
         
           dragDropArea.addEventListener('dragover', function (e) {
             e.preventDefault();
             dragDropArea.classList.add('highlight');
           });
         
           dragDropArea.addEventListener('dragleave', function (e) {
             e.preventDefault();
             dragDropArea.classList.remove('highlight');
           });
         
           dragDropArea.addEventListener('drop', handleDrop);
         
           dragDropArea.addEventListener('click', function () {
             fileInput.click();
           });
         
           fileInput.addEventListener('change', handleFileChange);
         });
      </script>
   </body>
</html>
